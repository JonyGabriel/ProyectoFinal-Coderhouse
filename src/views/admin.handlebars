<main>
  <div class="homeButton">
		<a href="/products">
			<img class="iconChat" src="https://www.svgrepo.com/show/533593/arrow-left.svg" alt="" width="64px" height="64px">
		</a>
  </div>
  <div class="adminText">
  <div class="userColor">
    <h1>Users</h1>
  </div>
  <table>
    <thead>
      <tr>
        <th>Username</th>
        <th>Rol</th>
        <th>Cambiar</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody class="tBodyProducts">
      {{#each users}}
        <tr class="product">
          <td>{{this.email}}</td>
          <td>{{this.role}}</td>
          <td onclick="changeRole('{{this._id}}')"><button>Cambiar role</button></td>
          <td onclick="deleteUser('{{this._id}}')"><button>Eliminar</button></td>
        </tr>
      {{/each}}
    </tbody>
  </table>
  <button onclick="deleteInactive()">Delete inactive</button>
</main>
</div>
<script>
  const deleteUser = async (uid) => {
    await fetch(`/api/session/${uid}`, {method: "DELETE"})
    window.location.reload()
  }
  const changeRole = async (uid) => {
    await fetch(`/api/session/premium/${uid}`, {method: "PUT"})
    window.location.reload()
  }
  const deleteInactive = async () => {
    console.log("asdasdasd")
    await fetch(`/api/session`, {method: "DELETE"})
    window.location.reload()
  }
</script>
<footer class="fixFooter">
	Copyright Â©CompuSV
</footer>